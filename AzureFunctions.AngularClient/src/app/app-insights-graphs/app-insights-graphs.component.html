<command-bar>
    <command displayText="{{ 'Add Graph' | translate }}"
             iconUrl="images/add.svg"
             (click)="onAddGraphClick()"></command>
</command-bar>

<div *ngIf="editingGraph" id="modal" class="modal fade in" style="display: block">
    <div class="modal-dialog modal-lg" style="width: 66%">
        <div class="modal-content">
            <div class="modal-header" style="padding-bottom: 0">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="hideModal()">&times;</button>
            </div>

            <div class="modal-body" style="padding-top: 0">
              <div class="text-label">Query:</div>
              <div monacoEditor
                   style="width: 100%; height: 200px"
                   id="query"
                   class="monaco"
                   [content]="editingGraph.query.value"
                   (onContentChanged)="newContent = $event"
                   (onShiftEnter)="runQuery($event)"
                   fileName="file.kusto">
              </div>
              <div class="full-width-graph">
                <graph full="true" [dataObservable]="editingGraph.data"></graph>
              </div>
              <button class="custom-button" (click)="createOrUpdateGraph()">
                  {{ 'save' | translate }}
              </button>
              <button class="custom-button" (click)="runQuery()">
                  {{ 'Run' | translate }}
              </button>
              <button class="custom-button" (click)="openAppInsights()">
                  {{ 'Edit in AppInsights Analytics' | translate }}
              </button>
            </div>
        </div>
    </div>
</div>

<div *ngIf="editingGraph" class="modal-backdrop fade in"></div>

<div class="graphs-container">
  <div class="graph" *ngFor="let graph of graphs">
    <div class="graph-commands">
      <div class="clickable graph-command edit-command" (click)="editGraph(graph)"><i class="fa fa-pencil"></i> Edit</div>
      <div class="clickable graph-command delete-command" (click)="deleteGraph(graph)"><i class="fa fa-trash-o"></i> Delete</div>
    </div>
    <graph [dataObservable]="graph.data"></graph>
  </div>
</div>